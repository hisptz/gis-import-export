/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { MenuService } from '../../services/menu.service';
import { PROFILE_MENUS } from '../../constants/profile-menus';
export class MenuSideBarComponent {
    /**
     * @param {?} menuService
     */
    constructor(menuService) {
        this.menuService = menuService;
        this.showProfile = false;
        this.rootUrl = '../../../';
        this.loadingUser = true;
        this.apps = [];
        this.originalApps = [];
        this.loadingModules = true;
        this.profileMenus = PROFILE_MENUS;
        this.filteredApp = '';
        this.showSidebarApps = false;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.menuService.getUserInfo(this.rootUrl).subscribe((profile) => {
            if (profile) {
                this.currentUser = {
                    name: profile.displayName,
                    email: profile.email
                };
            }
            this.loadingUser = false;
        });
        this.menuService
            .getMenuModules(this.rootUrl)
            .subscribe((menuModules) => {
            if (menuModules !== null) {
                this.loadingModules = false;
                this.originalApps = [...menuModules];
                this.apps = this._prepareMenuModules();
            }
        });
    }
    /**
     * @return {?}
     */
    _prepareMenuModules() {
        return this.filteredApp === ''
            ? this.originalApps.filter((menu) => {
                return !menu.onlyShowOnSearch;
            })
            : this.originalApps;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    toggleSidebarMenus(e) {
        e.stopPropagation();
        this.showSidebarApps = !this.showSidebarApps;
    }
    /**
     * @return {?}
     */
    updateMenuModules() {
        this.apps = this._prepareMenuModules();
    }
}
MenuSideBarComponent.decorators = [
    { type: Component, args: [{
                selector: 'app-menu-side-bar',
                template: `<div class="sidebar-container">
  <div class="sidebar-user-profile-block">
    <div class="sidebar-user-profile-logo" *ngIf="!loadingUser">{{currentUser?.name | abbreviate}}</div>
    <div class="sidebar-user-profile-info">
      <h4 *ngIf="!loadingUser">{{currentUser?.name}}</h4>
      <h6 *ngIf="!loadingUser">{{currentUser?.email}}</h6>
    </div>
  </div>
  <ul class="sidebar-list-block">
    <li>
      <a (click)="toggleSidebarMenus($event)">Apps</a>
    </li>
    <li [ngClass]="{
          'sidebar-app-hidden': !showSidebarApps
        }">
      <input type="text" class="sidebar-app-input" placeholder="Search Apps" [(ngModel)]="filteredApp" (ngModelChange)="updateMenuModules()">
    </li>
    <li class="sidebar-app-list" [ngClass]="{
          'sidebar-app-hidden': !showSidebarApps
        }">
      <a *ngFor="let app of  apps | filterByName: filteredApp" [href]="app.defaultAction" class="sidebar-app-menu-btn">
        <div class="sidebar-app-menu-btn-content">
          <img alt="" [src]="app.icon" title="{{app.displayName}}">
          <div class="app-menu-name">{{app.displayName}}</div>
        </div>
      </a>
    </li>
    <li *ngFor="let profileMenu of profileMenus">
      <a [href]="rootUrl + profileMenu.defaultAction">
        <img alt="" [src]="profileMenu.icon"> {{profileMenu.name}}
      </a>
    </li>
    <li>
      <a [href]="rootUrl + 'dhis-web-commons-security/logout.action'">Log Out</a>
    </li>
  </ul>
</div>`,
                styles: [`.sidebar-user-profile-block{text-align:left;background-color:#eee;height:100px;padding:5px;display:flex}.sidebar-user-profile-logo{height:90px;display:flex;align-items:center;justify-content:center;font-size:40px;font-weight:500;color:#9e9e9e;width:90px;border-radius:45px;text-align:center;background-color:#ddd}.sidebar-user-profile-info{padding:15px}.sidebar-list-block{list-style-type:none;margin:0;padding:0;display:block}.sidebar-hidden{display:none!important}.sidebar-app-input{border-style:none;border-bottom:1px solid #eee;color:#000;width:100%;padding:7px}.sidebar-app-input:focus{outline:0}.sidebar-list-block li a{text-decoration:none;display:block;color:#000;border-bottom:1px solid #eee;padding:10px 15px}.sidebar-list-block li a img{height:20px}.sidebar-app-list{display:flex;overflow:auto;height:200px;flex-wrap:wrap}.sidebar-app-menu-btn{display:flex!important;align-items:center;justify-content:center;margin:5px;text-decoration:none;border-radius:5px;border:1px solid #ddd;transition:all .2s ease-in-out;width:85px;height:85px}.sidebar-app-menu-btn-content{text-align:center}.app-menu-name{margin-top:5px;font-size:12px}`]
            },] },
];
/** @nocollapse */
MenuSideBarComponent.ctorParameters = () => [
    { type: MenuService }
];
MenuSideBarComponent.propDecorators = {
    rootUrl: [{ type: Input }]
};
function MenuSideBarComponent_tsickle_Closure_declarations() {
    /** @type {?} */
    MenuSideBarComponent.prototype.rootUrl;
    /** @type {?} */
    MenuSideBarComponent.prototype.showProfile;
    /** @type {?} */
    MenuSideBarComponent.prototype.currentUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingUser;
    /** @type {?} */
    MenuSideBarComponent.prototype.profileMenus;
    /** @type {?} */
    MenuSideBarComponent.prototype.apps;
    /** @type {?} */
    MenuSideBarComponent.prototype.originalApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.loadingModules;
    /** @type {?} */
    MenuSideBarComponent.prototype.filteredApp;
    /** @type {?} */
    MenuSideBarComponent.prototype.showSidebarApps;
    /** @type {?} */
    MenuSideBarComponent.prototype.menuService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS1zaWRlLWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AaGlzcHR6L25neC1kaGlzMi1tZW51LyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbWVudS1zaWRlLWJhci9tZW51LXNpZGUtYmFyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQVMsTUFBTSxlQUFlLENBQUM7QUFDdkQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBQzFELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQTJDOUQsTUFBTTs7OztJQVlKLFlBQW9CLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBQzFDLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1FBQ3pCLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDO1FBQzNCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ2YsSUFBSSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7UUFDM0IsSUFBSSxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7UUFDbEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFDdEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7S0FDOUI7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLE9BQVksRUFBRSxFQUFFO1lBQ3BFLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1osSUFBSSxDQUFDLFdBQVcsR0FBRztvQkFDakIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxXQUFXO29CQUN6QixLQUFLLEVBQUUsT0FBTyxDQUFDLEtBQUs7aUJBQ3JCLENBQUM7YUFDSDtZQUVELElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxDQUFDO1NBQzFCLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxXQUFXO2FBQ2IsY0FBYyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUM7YUFDNUIsU0FBUyxDQUFDLENBQUMsV0FBZ0IsRUFBRSxFQUFFO1lBQzlCLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztnQkFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUM7Z0JBQ3JDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixFQUFFLENBQUM7YUFDeEM7U0FDRixDQUFDLENBQUM7S0FDTjs7OztJQUVPLG1CQUFtQjtRQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsS0FBSyxFQUFFO1lBQzVCLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO2dCQUN2QyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7YUFDL0IsQ0FBQztZQUNGLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDOzs7Ozs7SUFHeEIsa0JBQWtCLENBQUMsQ0FBQztRQUNsQixDQUFDLENBQUMsZUFBZSxFQUFFLENBQUM7UUFDcEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUM7S0FDOUM7Ozs7SUFFRCxpQkFBaUI7UUFDZixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO0tBQ3hDOzs7WUF2R0YsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxtQkFBbUI7Z0JBQzdCLFFBQVEsRUFBRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O09Bb0NMO2dCQUNMLE1BQU0sRUFBRSxDQUFDLHFuQ0FBcW5DLENBQUM7YUFDaG9DOzs7O1lBM0NRLFdBQVc7OztzQkE2Q2pCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgSW5wdXQsIE9uSW5pdH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNZW51U2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL21lbnUuc2VydmljZSc7XG5pbXBvcnQgeyBQUk9GSUxFX01FTlVTIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb2ZpbGUtbWVudXMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtbWVudS1zaWRlLWJhcicsXG4gIHRlbXBsYXRlOiBgPGRpdiBjbGFzcz1cInNpZGViYXItY29udGFpbmVyXCI+XG4gIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItcHJvZmlsZS1ibG9ja1wiPlxuICAgIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXVzZXItcHJvZmlsZS1sb2dvXCIgKm5nSWY9XCIhbG9hZGluZ1VzZXJcIj57e2N1cnJlbnRVc2VyPy5uYW1lIHwgYWJicmV2aWF0ZX19PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInNpZGViYXItdXNlci1wcm9maWxlLWluZm9cIj5cbiAgICAgIDxoNCAqbmdJZj1cIiFsb2FkaW5nVXNlclwiPnt7Y3VycmVudFVzZXI/Lm5hbWV9fTwvaDQ+XG4gICAgICA8aDYgKm5nSWY9XCIhbG9hZGluZ1VzZXJcIj57e2N1cnJlbnRVc2VyPy5lbWFpbH19PC9oNj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG4gIDx1bCBjbGFzcz1cInNpZGViYXItbGlzdC1ibG9ja1wiPlxuICAgIDxsaT5cbiAgICAgIDxhIChjbGljayk9XCJ0b2dnbGVTaWRlYmFyTWVudXMoJGV2ZW50KVwiPkFwcHM8L2E+XG4gICAgPC9saT5cbiAgICA8bGkgW25nQ2xhc3NdPVwie1xuICAgICAgICAgICdzaWRlYmFyLWFwcC1oaWRkZW4nOiAhc2hvd1NpZGViYXJBcHBzXG4gICAgICAgIH1cIj5cbiAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwic2lkZWJhci1hcHAtaW5wdXRcIiBwbGFjZWhvbGRlcj1cIlNlYXJjaCBBcHBzXCIgWyhuZ01vZGVsKV09XCJmaWx0ZXJlZEFwcFwiIChuZ01vZGVsQ2hhbmdlKT1cInVwZGF0ZU1lbnVNb2R1bGVzKClcIj5cbiAgICA8L2xpPlxuICAgIDxsaSBjbGFzcz1cInNpZGViYXItYXBwLWxpc3RcIiBbbmdDbGFzc109XCJ7XG4gICAgICAgICAgJ3NpZGViYXItYXBwLWhpZGRlbic6ICFzaG93U2lkZWJhckFwcHNcbiAgICAgICAgfVwiPlxuICAgICAgPGEgKm5nRm9yPVwibGV0IGFwcCBvZiAgYXBwcyB8IGZpbHRlckJ5TmFtZTogZmlsdGVyZWRBcHBcIiBbaHJlZl09XCJhcHAuZGVmYXVsdEFjdGlvblwiIGNsYXNzPVwic2lkZWJhci1hcHAtbWVudS1idG5cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInNpZGViYXItYXBwLW1lbnUtYnRuLWNvbnRlbnRcIj5cbiAgICAgICAgICA8aW1nIGFsdD1cIlwiIFtzcmNdPVwiYXBwLmljb25cIiB0aXRsZT1cInt7YXBwLmRpc3BsYXlOYW1lfX1cIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiYXBwLW1lbnUtbmFtZVwiPnt7YXBwLmRpc3BsYXlOYW1lfX08L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2E+XG4gICAgPC9saT5cbiAgICA8bGkgKm5nRm9yPVwibGV0IHByb2ZpbGVNZW51IG9mIHByb2ZpbGVNZW51c1wiPlxuICAgICAgPGEgW2hyZWZdPVwicm9vdFVybCArIHByb2ZpbGVNZW51LmRlZmF1bHRBY3Rpb25cIj5cbiAgICAgICAgPGltZyBhbHQ9XCJcIiBbc3JjXT1cInByb2ZpbGVNZW51Lmljb25cIj4ge3twcm9maWxlTWVudS5uYW1lfX1cbiAgICAgIDwvYT5cbiAgICA8L2xpPlxuICAgIDxsaT5cbiAgICAgIDxhIFtocmVmXT1cInJvb3RVcmwgKyAnZGhpcy13ZWItY29tbW9ucy1zZWN1cml0eS9sb2dvdXQuYWN0aW9uJ1wiPkxvZyBPdXQ8L2E+XG4gICAgPC9saT5cbiAgPC91bD5cbjwvZGl2PmAsXG4gIHN0eWxlczogW2Auc2lkZWJhci11c2VyLXByb2ZpbGUtYmxvY2t7dGV4dC1hbGlnbjpsZWZ0O2JhY2tncm91bmQtY29sb3I6I2VlZTtoZWlnaHQ6MTAwcHg7cGFkZGluZzo1cHg7ZGlzcGxheTpmbGV4fS5zaWRlYmFyLXVzZXItcHJvZmlsZS1sb2dve2hlaWdodDo5MHB4O2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtmb250LXNpemU6NDBweDtmb250LXdlaWdodDo1MDA7Y29sb3I6IzllOWU5ZTt3aWR0aDo5MHB4O2JvcmRlci1yYWRpdXM6NDVweDt0ZXh0LWFsaWduOmNlbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNkZGR9LnNpZGViYXItdXNlci1wcm9maWxlLWluZm97cGFkZGluZzoxNXB4fS5zaWRlYmFyLWxpc3QtYmxvY2t7bGlzdC1zdHlsZS10eXBlOm5vbmU7bWFyZ2luOjA7cGFkZGluZzowO2Rpc3BsYXk6YmxvY2t9LnNpZGViYXItaGlkZGVue2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnNpZGViYXItYXBwLWlucHV0e2JvcmRlci1zdHlsZTpub25lO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlZWU7Y29sb3I6IzAwMDt3aWR0aDoxMDAlO3BhZGRpbmc6N3B4fS5zaWRlYmFyLWFwcC1pbnB1dDpmb2N1c3tvdXRsaW5lOjB9LnNpZGViYXItbGlzdC1ibG9jayBsaSBhe3RleHQtZGVjb3JhdGlvbjpub25lO2Rpc3BsYXk6YmxvY2s7Y29sb3I6IzAwMDtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MTBweCAxNXB4fS5zaWRlYmFyLWxpc3QtYmxvY2sgbGkgYSBpbWd7aGVpZ2h0OjIwcHh9LnNpZGViYXItYXBwLWxpc3R7ZGlzcGxheTpmbGV4O292ZXJmbG93OmF1dG87aGVpZ2h0OjIwMHB4O2ZsZXgtd3JhcDp3cmFwfS5zaWRlYmFyLWFwcC1tZW51LWJ0bntkaXNwbGF5OmZsZXghaW1wb3J0YW50O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjo1cHg7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZGRkO3RyYW5zaXRpb246YWxsIC4ycyBlYXNlLWluLW91dDt3aWR0aDo4NXB4O2hlaWdodDo4NXB4fS5zaWRlYmFyLWFwcC1tZW51LWJ0bi1jb250ZW50e3RleHQtYWxpZ246Y2VudGVyfS5hcHAtbWVudS1uYW1le21hcmdpbi10b3A6NXB4O2ZvbnQtc2l6ZToxMnB4fWBdXG59KVxuZXhwb3J0IGNsYXNzIE1lbnVTaWRlQmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgcm9vdFVybDogc3RyaW5nO1xuICBzaG93UHJvZmlsZTogYm9vbGVhbjtcbiAgY3VycmVudFVzZXI6IGFueTtcbiAgbG9hZGluZ1VzZXI6IGJvb2xlYW47XG4gIHByb2ZpbGVNZW51czogYW55W107XG4gIGFwcHM6IGFueVtdO1xuICBvcmlnaW5hbEFwcHM6IGFueVtdO1xuICBsb2FkaW5nTW9kdWxlczogYm9vbGVhbjtcbiAgZmlsdGVyZWRBcHA6IHN0cmluZztcbiAgc2hvd1NpZGViYXJBcHBzOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbWVudVNlcnZpY2U6IE1lbnVTZXJ2aWNlKSB7XG4gICAgdGhpcy5zaG93UHJvZmlsZSA9IGZhbHNlO1xuICAgIHRoaXMucm9vdFVybCA9ICcuLi8uLi8uLi8nO1xuICAgIHRoaXMubG9hZGluZ1VzZXIgPSB0cnVlO1xuICAgIHRoaXMuYXBwcyA9IFtdO1xuICAgIHRoaXMub3JpZ2luYWxBcHBzID0gW107XG4gICAgdGhpcy5sb2FkaW5nTW9kdWxlcyA9IHRydWU7XG4gICAgdGhpcy5wcm9maWxlTWVudXMgPSBQUk9GSUxFX01FTlVTO1xuICAgIHRoaXMuZmlsdGVyZWRBcHAgPSAnJztcbiAgICB0aGlzLnNob3dTaWRlYmFyQXBwcyA9IGZhbHNlO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5tZW51U2VydmljZS5nZXRVc2VySW5mbyh0aGlzLnJvb3RVcmwpLnN1YnNjcmliZSgocHJvZmlsZTogYW55KSA9PiB7XG4gICAgICBpZiAocHJvZmlsZSkge1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0ge1xuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGlzcGxheU5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWxcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2FkaW5nVXNlciA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGhpcy5tZW51U2VydmljZVxuICAgICAgLmdldE1lbnVNb2R1bGVzKHRoaXMucm9vdFVybClcbiAgICAgIC5zdWJzY3JpYmUoKG1lbnVNb2R1bGVzOiBhbnkpID0+IHtcbiAgICAgICAgaWYgKG1lbnVNb2R1bGVzICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5sb2FkaW5nTW9kdWxlcyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMub3JpZ2luYWxBcHBzID0gWy4uLm1lbnVNb2R1bGVzXTtcbiAgICAgICAgICB0aGlzLmFwcHMgPSB0aGlzLl9wcmVwYXJlTWVudU1vZHVsZXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIF9wcmVwYXJlTWVudU1vZHVsZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyZWRBcHAgPT09ICcnXG4gICAgICA/IHRoaXMub3JpZ2luYWxBcHBzLmZpbHRlcigobWVudTogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiAhbWVudS5vbmx5U2hvd09uU2VhcmNoO1xuICAgICAgfSlcbiAgICAgIDogdGhpcy5vcmlnaW5hbEFwcHM7XG4gIH1cblxuICB0b2dnbGVTaWRlYmFyTWVudXMoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5zaG93U2lkZWJhckFwcHMgPSAhdGhpcy5zaG93U2lkZWJhckFwcHM7XG4gIH1cblxuICB1cGRhdGVNZW51TW9kdWxlcygpIHtcbiAgICB0aGlzLmFwcHMgPSB0aGlzLl9wcmVwYXJlTWVudU1vZHVsZXMoKTtcbiAgfVxuXG59XG4iXX0=