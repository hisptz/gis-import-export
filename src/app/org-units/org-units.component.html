<div>
  <label> Loaded Organisation Units: <label class="badge badge-info">{{appService.getOrganisationUnitsCount()}}
      <sup *ngIf="appService.getLoadProgress() < 1">{{'/'+appService.dataCount}}</sup></label>
    &nbsp;
    <b>|</b>
    &nbsp;
    <label style="font-family: Verdana, Geneva, Tahoma, sans-serif">Displaying <span class="badge badge-info" >{{
        search('NAME',
        search('CODE',
        search('SHORT_NAME',
        search('LEVEL',appService.getOrganisationUnits())))).length}}</span>
      Records out of <span class="badge badge-info">{{appService.getOrganisationUnitsCount()}} </span> Records
    </label>
  </label>
  <p *ngIf="appService.getLoadProgress() < 1">
    <ngb-progressbar showValue="true" type="success" [value]="appService.getLoadProgress() * 100"></ngb-progressbar>
  </p>
  <div class="card">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Code</th>
          <th>Name</th>
          <th>Short Name</th>
          <th>Level</th>
          <th>Children</th>
        </tr>
        <!--For Seaching-->
        <tr>
          <td>
            <input type="text" placeholder="Type Organisation Unit Code..." class="form-control search-box" [value]="_search_keyword_code"
              (input)="updateCodeInput($event)">
          </td>
          <td>
            <input type="text" placeholder="Type Organisation Unit Name..." class="form-control search-box" [value]="_search_keyword_name"
              (input)="updateNameInput($event)">
          </td>
          <td>
            <input type="text" placeholder="Type Organisation Unit Short Name..." class="form-control search-box"
              [value]="_search_keyword_short_name" (input)="updateShortNameInput($event)">
          </td>
          <td>
            <div ngbDropdown class="d-inline-block">
              <button class="btn btn-light" style="opacity: 0.4" id="dropdownBasic1" ngbDropdownToggle>{{_search_keyword_level}}</button>
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <button *ngIf="_search_keyword_level != 'All'" class="dropdown-item" (click)="updateLevelInput('All')">All</button>
                <button *ngIf="_search_keyword_level != 'Country'" class="dropdown-item" (click)="updateLevelInput('Country')">Country</button>
                <button *ngIf="_search_keyword_level != 'Region'" class="dropdown-item" (click)="updateLevelInput('Region')">Region</button>
                <button *ngIf="_search_keyword_level != 'Council'" class="dropdown-item" (click)="updateLevelInput('Council')">Council</button>
                <button *ngIf="_search_keyword_level != 'Facility'" class="dropdown-item" (click)="updateLevelInput('Facility')">Facility</button>
              </div>
            </div>
          </td>
          <td>

          </td>
        </tr>
      </thead>
      <tbody id="table-body">
        <tr *ngFor="let organisationUnit of search('NAME',
           search('CODE',
           search('SHORT_NAME',
           search('LEVEL',appService.getOrganisationUnits())
           )
           )) 
           | paginate: {itemsPerPage: 20, currentPage: p }">
          <td>
            {{ organisationUnit.code}}
          </td>
          <td>
            {{ organisationUnit.name}}
          </td>
          <td>
            {{organisationUnit.shortName}}
          </td>
          <td>
            {{appService.getOrganisationUnitLevelName(organisationUnit.level)}}
          </td>
          <td>
            <span *ngIf="organisationUnit.children.length>0">
              <!--{{organisationUnit.children.length}}-->
              <i class='fa fa-plus-square' placement="bottom" ngbTooltip="{{getChildrenString(organisationUnit)}}"
                (click)="openChildrenModal('Helllloooo')"></i>


            </span>

            <ul class="org-unit-child" *ngIf="organisationUnit.children.length>0">
              <li *ngFor="let child of organisationUnit.children" hidden>
                {{child.name}}
              </li>
            </ul>

            <label *ngIf="organisationUnit.children.length == 0" placement="bottom" ngbTooltip="No Children to show">
              <i class="fa fa-minus-square"></i>
            </label>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>


<ng-template #content let-modal style="margin-top: 200px">
  <div class="modal-header">
    <h4 class="modal-title">Modal title</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>
      ...............................................
      ...............................................
      ...............................................
      ...............................................
      ...............................................
      ...............................................
      ...............................................
    </p>
    <p>One fine body&hellip;</p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-light" (click)="modal.close('Close click')">Close</button>
  </div>
</ng-template>